---
title: React Native åŸç”Ÿè®¾å¤‡äº¤äº’
tags: [Expo, Haptics, MobileDevelopment, PushNotifications, ReactNative]
summary: æœ¬æ–‡æ·±åº¦å‰–æäº† React Native åº”ç”¨ä¸­ä¸åŸç”Ÿè®¾å¤‡äº¤äº’çš„ä¸¤ç§æ ¸å¿ƒæŠ€æœ¯ï¼šè§¦è§‰åé¦ˆ (Haptic Feedback) ä¸æ¨é€é€šçŸ¥ (Push Notifications)ã€‚ç¬”è®°ç³»ç»Ÿæ€§åœ°é˜è¿°äº†å¦‚ä½•åˆ©ç”¨ expo-haptics åº“æä¾›ä¸°å¯Œçš„è§¦æ„Ÿä½“éªŒï¼Œå¹¶è¯¦ç»†æ‹†è§£äº†æ¨é€é€šçŸ¥çš„åˆ†ç±»ï¼ˆæœ¬åœ°ä¸è¿œç¨‹ï¼‰ã€æƒé™ç®¡ç†æµç¨‹ä»¥åŠå¦‚ä½•é€šè¿‡ expo-notifications å®ç°æœ¬åœ°é€šçŸ¥çš„è°ƒåº¦ã€‚
date: 2025-08-28
lastmod: 2025-08-28
---
æ„å»ºé«˜è´¨é‡çš„ç§»åŠ¨åº”ç”¨ï¼Œä¸ä»…åœ¨äºæä¾›æµç•…çš„ç”¨æˆ·ç•Œé¢ï¼Œæ›´åœ¨äºå……åˆ†åˆ©ç”¨åŸç”Ÿå¹³å°çš„è®¾å¤‡èƒ½åŠ›ï¼Œä»¥åˆ›é€ æ²‰æµ¸å¼ã€é«˜ç²˜æ€§çš„ç”¨æˆ·ä½“éªŒã€‚åœ¨ä¼—å¤šè®¾å¤‡äº¤äº’ä¸­ï¼Œ**è§¦è§‰åé¦ˆ (Haptic Feedback)** å’Œ**æ¨é€é€šçŸ¥ (Push Notifications)** æ˜¯ä¸¤ç§æœ€ç›´æ¥ã€æœ€æœ‰æ•ˆçš„æŠ€æœ¯ã€‚è§¦è§‰åé¦ˆé€šè¿‡ç²¾ç»†çš„éœ‡åŠ¨æ¥å¢å¼ºæ“ä½œçš„ç¡®è®¤æ„Ÿï¼Œè€Œæ¨é€é€šçŸ¥åˆ™æ˜¯åœ¨åº”ç”¨æœªå¤„äºå‰å°æ—¶ï¼Œç»´æŒç”¨æˆ·å‚ä¸åº¦çš„å…³é”®æ¸ é“ã€‚

# è§¦è§‰åé¦ˆ (Haptic Feedback)

è§¦è§‰åé¦ˆæ˜¯å¯¹ç”¨æˆ·æ“ä½œå“åº”çš„ä¸€ç§è½»å¾®çš„ã€ç‰©ç†æ€§çš„éœ‡åŠ¨ã€‚æ°å½“å¥½å¤„åœ°ä½¿ç”¨å®ƒï¼Œå¯ä»¥æ˜¾è‘—æå‡åº”ç”¨çš„è´¨æ„Ÿå’Œç”¨æˆ·æ“ä½œçš„ç¡®å®šæ€§ã€‚

## ä½¿ç”¨ `expo-haptics` å®ç°

`expo-haptics` åº“å°è£…äº† iOS å’Œ Android å¹³å°çš„åŸç”Ÿè§¦è§‰åé¦ˆ APIï¼Œæä¾›äº†ä¸€ä¸ªç®€å•ã€è·¨å¹³å°çš„è§£å†³æ–¹æ¡ˆã€‚

> [!example] Haptic Feedback çš„ä¸»è¦ç±»å‹
> - **`Haptics.impactAsync(style)`**: ç”¨äºæ¨¡æ‹Ÿç‰©ç†ç¢°æ’æ„Ÿï¼Œé€šå¸¸åœ¨ç”¨æˆ·å®Œæˆä¸€ä¸ªæ˜ç¡®çš„æ“ä½œï¼ˆå¦‚æ‹–æ‹½åˆ°ä½ã€å¼€å…³åˆ‡æ¢ï¼‰æ—¶è§¦å‘ã€‚
> 	- `style`: `Haptics.ImpactFeedbackStyle.Light`, `Medium`, `Heavy` (iOS/Android), `Soft`, `Rigid` (iOS only).
> - **`Haptics.notificationAsync(type)`**: ç”¨äºå‘ç”¨æˆ·ä¼ è¾¾æˆåŠŸã€è­¦å‘Šæˆ–é”™è¯¯ç­‰é€šçŸ¥ç±»ä¿¡æ¯ã€‚
> 	- `type`: `Haptics.NotificationFeedbackType.Success`, `Warning`, `Error`.
> - **`Haptics.selectionAsync()`**: ä¸€ç§éå¸¸è½»å¾®çš„åé¦ˆï¼Œç”¨äºå½“ç”¨æˆ·æ­£åœ¨æ»šåŠ¨é€‰æ‹©å™¨æˆ–åœ¨å¤šä¸ªé€‰é¡¹é—´åˆ‡æ¢æ—¶ï¼Œæ¨¡æ‹Ÿç‰©ç†åˆ»åº¦æ„Ÿã€‚

```js
import * as Haptics from 'expo-haptics';
import { Button, View } from 'react-native';

export default function HapticExample() {
  return (
    <View>
      <Button
        title="è§¦å‘ä¸€ä¸ªä¸­ç­‰å¼ºåº¦çš„å†²å‡»åé¦ˆ"
        onPress={() => Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium)}
      />
      <Button
        title="è§¦å‘ä¸€ä¸ªæˆåŠŸé€šçŸ¥åé¦ˆ"
        onPress={() => Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success)}
      />
    </View>
  );
}
```

# æ¨é€é€šçŸ¥ (Push Notifications)

æ¨é€é€šçŸ¥æ˜¯ä¸€ç§ç”±åº”ç”¨ç¨‹åºç”Ÿæˆã€å³ä½¿ç”¨æˆ·æœªåœ¨ä½¿ç”¨è¯¥åº”ç”¨æ—¶ä¹Ÿèƒ½åœ¨å…¶è®¾å¤‡ä¸Šæ˜¾ç¤ºçš„ç³»ç»Ÿçº§è­¦æŠ¥ã€‚å®ƒæ˜¯æå‡ç”¨æˆ·ç•™å­˜å’Œå‚ä¸åº¦çš„å…³é”®å·¥å…·ã€‚

## æ ¸å¿ƒæ¦‚å¿µä¸åˆ†ç±»

åœ¨ç§»åŠ¨åº”ç”¨ä¸­ï¼Œé€šçŸ¥ä¸»è¦åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š

- **è¿œç¨‹é€šçŸ¥ (Remote Notifications)**:
    - **æ¥æº**: ç”±ä½ çš„**æœåŠ¡å™¨**é€šè¿‡äº’è”ç½‘æ¨é€ã€‚
    - **æœºåˆ¶**: æœåŠ¡å™¨å°†é€šçŸ¥å†…å®¹ï¼Œè¿åŒä¸€ä¸ªå”¯ä¸€çš„**è®¾å¤‡æ¨é€ä»¤ç‰Œ (Device Push Token)**ï¼Œå‘é€ç»™å¹³å°åŸç”Ÿçš„æ¨é€æœåŠ¡ï¼ˆå¦‚ Apple Push Notification service (APNs) æˆ– Firebase Cloud Messaging (FCM)ï¼‰ï¼Œå†ç”±å¹³å°æœåŠ¡å°†é€šçŸ¥ä¸‹å‘åˆ°å…·ä½“çš„è®¾å¤‡ä¸Šã€‚
    - **ç”¨é€”**: æ–°æ¶ˆæ¯æé†’ã€æ–°é—»æ›´æ–°ã€ä¸ªæ€§åŒ–è¥é”€ç­‰ã€‚
- **æœ¬åœ°é€šçŸ¥ (Local Notifications)**:
    - **æ¥æº**: ç”±**åº”ç”¨ç¨‹åºè‡ªèº«**åœ¨è®¾å¤‡ä¸Šè¿›è¡Œè°ƒåº¦ã€‚
    - **æœºåˆ¶**: åº”ç”¨åœ¨æœ¬åœ°è®¡ç®—å¹¶è®¾å®šä¸€ä¸ªæœªæ¥çš„è§¦å‘æ¡ä»¶ï¼ˆå¦‚å…·ä½“æ—¶é—´æˆ–æ—¶é—´é—´éš”ï¼‰ï¼Œæ“ä½œç³»ç»Ÿä¼šåœ¨æ»¡è¶³è¯¥æ¡ä»¶æ—¶ï¼Œè‡ªåŠ¨å±•ç¤ºé€šçŸ¥ï¼Œæ— éœ€ä»»ä½•ç½‘ç»œè¿æ¥ã€‚
    - **ç”¨é€”**: é—¹é’Ÿã€æ—¥å†æé†’ã€è®¡æ—¶å™¨å®Œæˆé€šçŸ¥ç­‰ã€‚

```mermaid
graph TD
    subgraph "è¿œç¨‹é€šçŸ¥"
        A(ä½ çš„æœåŠ¡å™¨) --> B(APNs / FCM æ¨é€æœåŠ¡);
        B --> C(ç”¨æˆ·è®¾å¤‡);
    end
    subgraph "æœ¬åœ°é€šçŸ¥"
        D(åº”ç”¨ç¨‹åº) -- "åœ¨è®¾å¤‡ä¸Šè°ƒåº¦" --> E(æ“ä½œç³»ç»Ÿ);
        E --> F(ç”¨æˆ·è®¾å¤‡);
    end
```

## æƒé™ç®¡ç†

åœ¨å‘é€ä»»ä½•é€šçŸ¥ä¹‹å‰ï¼Œåº”ç”¨**å¿…é¡»**é¦–å…ˆå‘ç”¨æˆ·è¯·æ±‚æƒé™ã€‚

> [!warning] æƒé™è¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸ
> - **è¯·æ±‚ä¸€æ¬¡**: æ ¹æ® iOS å’Œ Android çš„å¹³å°ç­–ç•¥ï¼Œä½ çš„åº”ç”¨**åªèƒ½å‘ç”¨æˆ·å±•ç¤ºä¸€æ¬¡**åŸç”Ÿçš„æƒé™è¯·æ±‚å¼¹çª—ã€‚
> - **`requestPermissionsAsync()`**: `expo-notifications` æä¾›çš„æ­¤æ–¹æ³•ç”¨äºè§¦å‘è¯¥å¼¹çª—ã€‚æ— è®ºç”¨æˆ·æ¥å—è¿˜æ˜¯æ‹’ç»ï¼Œåç»­å†æ¬¡è°ƒç”¨æ­¤æ–¹æ³•ï¼Œéƒ½**ä¸ä¼š**å†æ¬¡å¼¹å‡ºåŸç”Ÿå¯¹è¯æ¡†ï¼Œè€Œæ˜¯ç›´æ¥è¿”å›ç”¨æˆ·ä¹‹å‰çš„é€‰æ‹©ã€‚
> - **å¼•å¯¼è‡³ç³»ç»Ÿè®¾ç½®**: å¦‚æœç”¨æˆ·åˆæ¬¡æ‹’ç»äº†æƒé™ï¼Œå”¯ä¸€èƒ½å†æ¬¡å¼€å¯çš„æ–¹å¼æ˜¯å¼•å¯¼ç”¨æˆ·æ‰‹åŠ¨å‰å¾€**æ“ä½œç³»ç»Ÿçš„â€œè®¾ç½®â€åº”ç”¨**ä¸­ä¸ºä½ çš„ App å¼€å¯é€šçŸ¥æƒé™ã€‚

## è°ƒåº¦æœ¬åœ°é€šçŸ¥

`expo-notifications` åº“æä¾›äº†å¼ºå¤§çš„ API æ¥è°ƒåº¦æœ¬åœ°é€šçŸ¥ã€‚

> [!note] é€šçŸ¥çš„å†…å®¹ä¸è§¦å‘å™¨
> - **`content`**: ä¸€ä¸ªå¯¹è±¡ï¼Œå®šä¹‰äº†é€šçŸ¥çš„è§†è§‰å†…å®¹ï¼Œå¦‚ `title`, `body`, `sound` ç­‰ã€‚
> - **`trigger`**: ä¸€ä¸ªå¯¹è±¡ï¼Œå®šä¹‰äº†é€šçŸ¥ä½•æ—¶è¢«è§¦å‘ã€‚å¯ä»¥æ˜¯å…·ä½“æ—¥æœŸ (`date`)ã€æ—¶é—´é—´éš” (`seconds`) æˆ–åœ°ç†ä½ç½®ç­‰ã€‚

```js
import * as Notifications from 'expo-notifications';
import { Button, View } from 'react-native';

// é…ç½®é€šçŸ¥å¤„ç†å™¨ï¼ˆå½“åº”ç”¨åœ¨å‰å°æ—¶å¦‚ä½•å¤„ç†é€šçŸ¥ï¼‰
Notifications.setNotificationHandler({
  handleNotification: async () => ({
    shouldShowAlert: true,
    shouldPlaySound: false,
    shouldSetBadge: false,
  }),
});

export default function NotificationScheduler() {
  const scheduleNotification = async () => {
    // 1. è¯·æ±‚æƒé™
    const { status } = await Notifications.requestPermissionsAsync();
    if (status !== 'granted') {
      alert('æ— æ³•è°ƒåº¦é€šçŸ¥ï¼Œå› ä¸ºæœªè·å¾—æƒé™ï¼');
      return;
    }

    // 2. è°ƒåº¦é€šçŸ¥
    await Notifications.scheduleNotificationAsync({
      content: {
        title: "è¿™æ˜¯ä¸€ä¸ªæœ¬åœ°é€šçŸ¥ ğŸ“¬",
        body: 'è¿™æ˜¯é€šçŸ¥çš„æ­£æ–‡å†…å®¹ã€‚',
        data: { customData: 'goes here' }, // å¯é™„åŠ ä»»æ„æ•°æ®
      },
      trigger: {
        seconds: 5, // 5ç§’åè§¦å‘
      },
    });

    console.log('é€šçŸ¥å·²åœ¨ 5 ç§’åè¢«è°ƒåº¦ã€‚');
  };

  return (
    <View>
      <Button title="5ç§’åå‘é€é€šçŸ¥" onPress={scheduleNotification} />
    </View>
  );
}
```

